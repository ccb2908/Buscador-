<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>¬°Lupa! ‚Äî Resultados</title>
<link rel="stylesheet" href="style.css">
<style>
  body {
    background: #fff;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    color: #202124;
  }
  header {
    padding: 20px 0;
    text-align: center;
  }
  .logo {
    font-size: 32px;
    font-weight: bold;
    color: #1b9c48;
    text-decoration: none;
  }
  .barra-superior {
    max-width: 700px;
    margin: 0 auto;
    padding: 10px 0;
  }
  .search-bar {
    display: flex;
    gap: 8px;
  }
  .search-bar input {
    flex: 1;
    padding: 8px 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 20px;
  }
  .search-bar button {
    border: none;
    background: #6f42c1;
    color: white;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    cursor: pointer;
  }
  .abas {
    display: flex;
    gap: 15px;
    margin-top: 10px;
    font-size: 14px;
  }
  .aba {
    background: none;
    border: none;
    cursor: pointer;
    color: #555;
    padding: 6px 0;
  }
  .aba.ativa {
    color: #1b9c48;
    border-bottom: 2px solid #1b9c48;
  }

  /* Painel */
  #painel {
    max-width: 700px;
    margin: 20px auto;
    padding: 20px;
    background: #f8f8f8;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  #painel h2 {
    margin-top: 0;
    color: #1b9c48;
  }
  #painel .categoria {
    font-size: 14px;
    color: #777;
    margin-bottom: 10px;
  }
  #painel .descricao {
    font-size: 16px;
    margin-bottom: 15px;
  }
  #painel .imagens {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
  }
  #painel .imagens img {
    width: 100%;
    border-radius: 5px;
  }

  #painelResultados {
    max-width: 700px;
    margin: 20px auto;
    padding: 0 20px;
  }
  .resultado {
    margin-bottom: 25px;
  }
  .resultado a.titulo-link h3 {
    font-size: 18px;
    color: #1b9c48;
    margin: 0;
  }
  .resultado a.titulo-link.visited h3 {
    color: #6f42c1;
  }
  .resultado small {
    color: #006621;
    font-size: 13px;
  }
  .resultado p {
    font-size: 14px;
    color: #4d5156;
    margin: 4px 0 0;
  }
  footer {
    text-align: center;
    padding: 20px;
    font-size: 13px;
    color: #777;
    border-top: 1px solid #eee;
    margin-top: 40px;
  }
</style>
</head>
<body>

<header>
  <a href="index.html" class="logo">¬°Lupa!</a>
</header>

<div class="barra-superior">
  <div class="search-bar">
    <input type="text" id="campoBusca" placeholder="Pesquisar..." autofocus>
    <button id="botaoBusca">üîç</button>
  </div>
  <nav class="abas">
    <button class="aba ativa" onclick="window.location.href='resultados.html'">Tudo</button>
    <button class="aba" onclick="window.location.href='imagens.html'">Imagens</button>
    <button class="aba" onclick="window.location.href='videos.html'">V√≠deos</button>
    <button class="aba" onclick="window.location.href='noticias.html'">Not√≠cias</button>
  </nav>
</div>

<!-- Painel adicionado abaixo das abas -->
<div id="painel">
  <h2 id="tituloPainel">T√≠tulo do Painel</h2>
  <div class="categoria" id="categoriaPainel"></div>
  <div class="descricao" id="descricaoPainel"></div>
  <div class="imagens" id="imagensPainel"></div>
</div>

<main id="painelResultados">
  <div id="lista-resultados"></div>
</main>

<footer>¬© 2025 ¬°Lupa! ‚Äî Motor √âtico de Busca</footer>

<script>
async function buscarResultados(termo) {
  termo = termo.toLowerCase().trim();
  if (!termo) return;

  try {
    const res = await fetch('index.json');
    const dados = await res.json();

    const resultados = dados.filter(item =>
      item.titulo.toLowerCase().includes(termo) ||
      item.descricao.toLowerCase().includes(termo) ||
      item.categoria.toLowerCase().includes(termo)
    );

    const lista = document.getElementById('lista-resultados');
    lista.innerHTML = '';

    if (resultados.length === 0) {
      lista.innerHTML = '<p>Nenhum resultado encontrado.</p>';
    } else {
      resultados.forEach(item => {
        const div = document.createElement('div');
        div.className = 'resultado';
        div.innerHTML = `
          <a href="${item.link}" class="titulo-link">
            <h3>${item.titulo}</h3>
          </a>
          <small>${item.link}</small>
          <p>${item.descricao}</p>
        `;
        lista.appendChild(div);
      });
    }
  } catch (erro) {
    console.error('Erro ao carregar index.json:', erro);
  }
}

// Fun√ß√£o para carregar o painel
async function carregarPainel(termo) {
  try {
    const res = await fetch('painel.json');
    const dados = await res.json();

    const item = dados.find(i => i.titulo.toLowerCase() === termo.toLowerCase());
    const tituloEl = document.getElementById('tituloPainel');
    const categoriaEl = document.getElementById('categoriaPainel');
    const descricaoEl = document.getElementById('descricaoPainel');
    const imagensEl = document.getElementById('imagensPainel');

    if (!item) {
      tituloEl.textContent = '';
      categoriaEl.textContent = '';
      descricaoEl.textContent = '';
      imagensEl.innerHTML = '';
      return;
    }

    tituloEl.textContent = item.titulo;
    categoriaEl.textContent = item.categoria || '';
    descricaoEl.textContent = item.descricao;

    imagensEl.innerHTML = '';
    item.imagens.forEach(src => {
      const img = document.createElement('img');
      img.src = src;
      imagensEl.appendChild(img);
    });
  } catch (erro) {
    console.error('Erro ao carregar painel.json:', erro);
  }
}

document.getElementById('botaoBusca').addEventListener('click', () => {
  const termo = document.getElementById('campoBusca').value;
  buscarResultados(termo);
  carregarPainel(termo);
});

document.getElementById('campoBusca').addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    const termo = document.getElementById('campoBusca').value;
    buscarResultados(termo);
    carregarPainel(termo);
  }
});

const query = new URLSearchParams(window.location.search).get('q');
if (query) {
  document.getElementById('campoBusca').value = query;
  buscarResultados(query);
  carregarPainel(query);
}
</script>

</body>
</html>
