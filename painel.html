<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel de Informações</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f2f2f2; }
    .painel { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
    h1 { color: #333; }
    h2 { color: #666; margin-top: -5px; }
    .imagens img { width: 180px; margin: 10px; border-radius: 8px; }
    ul { list-style: square; margin-left: 25px; }
  </style>
</head>
<body>
  <div class="painel">
    <h1 id="titulo">Título do Painel</h1>
    <h2 id="subtitulo"></h2>
    <p id="descricao">Descrição do termo ou artigo.</p>
    <p id="contexto"></p>
    <p id="origem"></p>
    <div id="poderes"></div>
    <div class="imagens" id="imagens"></div>
  </div>

  <script>
    // Função que lê o painel.json dinamicamente
    async function carregarPainel() {
      try {
        const urlParams = new URLSearchParams(window.location.search);
        const termo = urlParams.get("termo")?.toLowerCase();
        const resp = await fetch("painel.json");
        const dados = await resp.json();

        // Busca o item com base no "id" ou "titulo"
        const item = dados.find(el => el.id === termo || el.titulo.toLowerCase() === termo);

        if (!item) {
          document.getElementById("titulo").innerText = "Resultado não encontrado.";
          document.getElementById("descricao").innerText = "";
          return;
        }

        // Renderiza apenas o que existir
        const set = (id, val) => { if (val) document.getElementById(id).innerText = val; };
        set("titulo", item.titulo);
        set("subtitulo", item.subtitulo);
        set("descricao", item.descricao);
        set("contexto", item.contexto ? "Contexto: " + item.contexto : "");
        set("origem", item.origem ? "Origem: " + item.origem : "");

        if (item.poderes && item.poderes.length > 0) {
          document.getElementById("poderes").innerHTML = 
            `<strong>Poderes:</strong><ul>${item.poderes.map(p => `<li>${p}</li>`).join("")}</ul>`;
        }

        if (item.imagens && item.imagens.length > 0) {
          document.getElementById("imagens").innerHTML =
            item.imagens.map(img => `<img src="${img}" alt="${item.titulo}">`).join("");
        }

      } catch (e) {
        console.error("Erro ao carregar painel:", e);
      }
    }

    carregarPainel();
  </script>
</body>
</html>
